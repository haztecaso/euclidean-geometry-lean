% \documentclass[handout, t, aspectratio=169]{beamer}
\documentclass[t, aspectratio=169]{beamer}
\input{00_common_preamble.tex}

\setbeameroption{hide notes} % Only slides
% \setbeameroption{show only notes} % Only notes
% \setbeameroption{show notes on second screen=right} % Both

\makeatletter
\def\beamer@setupnote{%
  \gdef\beamer@notesactions{%
    \beamer@outsideframenote{%
      \beamer@atbeginnote%
      \beamer@notes%
      \ifx\beamer@noteitems\@empty\else
      \begin{itemize}\itemsep=0pt\parskip=0pt%
        \beamer@noteitems%
      \end{itemize}%
      \fi%
      \beamer@atendnote%
    }%
    \gdef\beamer@notesactions{}%
  }
}
\makeatother

\setbeamercolor{note page}{bg=white!90!black, fg=black}
\setbeamertemplate{note page}{%
    % adds in bg color
        \insertvrule{\paperheight}{note page.bg}%
        \vskip-\paperheight%
    % changes font color
        \usebeamercolor[fg]{note page}%
    % inserts note
        \insertnote%
}

\setbeamertemplate{navigation symbols}{}
\setbeamertemplate{frametitle}[default][center]
\addtobeamertemplate{frametitle}{\let\insertframetitle\insertsectionhead}{}
\addtobeamertemplate{frametitle}{\let\insertframesubtitle\insertsubsectionhead}{}

\makeatletter
\CheckCommand*\beamer@checkframetitle{\@ifnextchar\bgroup\beamer@inlineframetitle{}}
\renewcommand*\beamer@checkframetitle{\global\let\beamer@frametitle\relax\@ifnextchar\bgroup\beamer@inlineframetitle{}}
\makeatother

\usepackage{graphicx}

\usepackage{multicol}

\title{Formalización de las matemáticas con Lean.\\ Un caso de estudio: Geometría euclídea plana.}
\author{Adrián Lattes Grassi}
\date{18 de septiembre de 2023}
\subtitle{Facultad de Ciencias Matemáticas.\\Trabajo dirigido por Jorge Carmona Ruber.}

\lstdefinestyle{leanBeamer}{
  style=leanBase,
  frame=,
  basicstyle=\fontsize{8}{9}\selectfont\ttfamily,
  escapeinside=||
}
\lstset{style=leanBeamer}

\setlength\columnsep{50pt}
\setbeamertemplate{items}[circle]

\begin{document}

\begin{frame}
	\titlepage
	\note[item]{Voy a contar resumidamente en qué ha consistido mi Trabajo de
		Fin de Grado.}
	\note[item]{Expondré brevemente el proceso del trabajo, qué es formalizar
		matemáticas y cómo se usa Lean para formalizar enunciados y
		demostraciones.}
	\note[item]{Explicaré muy resumidamente una demostración de una proposición
		de la geometría de incidencia}
	\note[item]{Hablaré sobre cómo he adaptado algunas definiciones para
		formalizarlas.}
	\note[item]{Propondré una estrategia de demostración de la independencia del
		axioma de las paralelas.}
	\note[item]{Empecé aprendiendo a utilizar el Lenguaje Lean. Fue una suerte
		poder asistir al curso de doctorado sobre Lean impartido por María Inés
		de Frutos, pudiendo compartir dudas y soluciones con la profesora y los
		asistentes.}
	\note[item]{Posteriormente empecé a utilizar Lean para formalizar axiomas,
		definiciones y resultados de la Geometría euclídea plana. Fui
		compaginando el estudio de la geometría con el aprendizaje de Lean.}
	\note[item]{Durante el proceso de formalización leí algún artículo sobre
		formalización de geometría euclídea en otros sistemas de demostración
		asistida.}
\end{frame}

% \section{Proceso}
% \begin{frame}[fragile, c]
% 	\begin{itemize}
%         \item Aprendizaje de Lean 
% 		\item Estudio y formalización de la geometría de Hilbert
% 		\item Lectura de trabajos relacionados
% 		% \item Independencia del axioma de las paralelas
% 	\end{itemize}
% \end{frame}

\section{Formalización asistida por computadores}

\begin{frame}[fragile, c]
	\begin{itemize}
		\item Digitalización de definiciones y enunciados
		      \note[item]{Digitalizar conceptos y enunciados puede resultar muy
			      útil en el campo de las matemáticas. Si los artículos se
			      publicaran acompañados de una formalización de los conceptos y
			      enunciados, se podría construir una base de datos de resultados
			      matemáticos, lo que facilitaría enormemente la búsqueda de los
			      artículos.}
		\item Comprobación mecanizada de demostraciones
		      \note[item]{Las demostraciones se pueden digitalizar de forma que el
			      asistente de demostración compruebe que cada paso es correcto.}
		\item Uso en docencia y comunicación
		      \note[item]{Para alumnos de matemáticas puede resultar muy útil para
			      afianzar conocimientos y comprobar la corrección de
			      razonamientos.}
		\item Demostración automatizada
		      \note[item]{Este es un campo de investigación abierto en el que
			      queda mucho por avanzar. El sueño es conseguir que los
			      ordenadores sean capaces de encontrar demostraciones de
			      resultados de forma independiente.}
	\end{itemize}
\end{frame}

\section{Formalizando matemáticas en Lean}

\begin{frame}[fragile, c]
	\begin{itemize}[<+->]
		\item Lean implementa el \textit{Cálculo de construcciones inductivas}
		      \note[item]{Lean es un lenguaje de programación funcional que
			      implementa la teoría de tipos del \textit{Cálculo de
				      construcciones inductivas}, particularmente útil para formalizar
			      matemáticas.}
		\item Correspondencia de Curry-Howard
		      \note[item]{La correspondencia de Curry-Howard establece relaciones
			      teorías de tipos y lógicas formales.}
		\item \textit{Proposiciones como tipos}\\
		      \lstinline{P : Prop}
		      \note[item]{En este contexto, las proposiciones lógicas se
			      corresponden con los tipos. En Lean tenemos el tipo de orden
			      superior \lstinline{Prop} cuyos términos son las proposiciones,
			      que son a su vez tipos.}
		\item \textit{Demostraciones como términos}\\
		      \lstinline{p : P : Prop}
		      \note[item]{Demostrar una proposición se corresponde con construir
			      un término de tipo esa proposición.}
		\item Modo táctico
		      \note[item]{Demostrar un resultado construyendo el término del tipo
			      correspondiente no es la forma de desarrollar demostraciones a
			      la que estamos acostumbrados en matemáticas. En Lean tenemos el
			      modo táctico, que permite crear estos términos mediante
			      instrucciones más cercanas a las técnicas de demostración
			      usuales.}
	\end{itemize}
\end{frame}

\section{Geometría euclídea plana}
\subsection{Axiomatización de Hilbert}

\begin{frame}[fragile, c]
	\centerline{
		\includegraphics[height=5cm]{./imgs/Hilbert_portada.png}\,
		\note[item]{La axiomatización más moderna de la geometría de
			Euclides es la desarrollada por Hilbert, llamada Fundamentos de
			la Geometría.}
		\pause
		\includegraphics[height=5cm]{./imgs/Hartshorne_portada.png}
		\includegraphics[height=5cm]{./imgs/Greenberg_portada.png}\,
		\note[item]{Yo he seguido las presentaciones modernas de los libros
			de Hartshorne y Greenberg.}
	}
\end{frame}

\subsection{Nociones fundamentales}

\begin{frame}[fragile, c]
	\begin{itemize}
		\item \textit{Puntos}. $A, B, C, \dots$
		\item \textit{Líneas}. $l, m, n, \dots$
		      \pause
		\item \textit{incidencia}. $A\sim l$
		\item \textit{orden}. $A * B * C$
		\item \textit{congruencia de segmentos}. $\overline{AB}\cong\overline{CD}$
		\item \textit{congruencia de ángulos}. $\angle ABC \cong\angle CDE$
	\end{itemize}
\end{frame}



\section{Geometría de incidencia}
% \input{presentacion-incidencia-teoria.tex}

\begin{frame}[fragile]
	\begin{lstlisting}
     class incidence_geometry (Point Line : Type*) :=
       (lies_on : Point → Line → Prop)
       (infix ` ~ ` : 50 := lies_on)|\pause|
       (I1 {A B : Point} (h : A ≠ B) : ∃! l : Line, A ~ l ∧ B ~ l)|\pause|
       (I2 (l : Line) : ∃ A B : Point, A ≠ B ∧ A ~ l ∧ B ~ l)|\pause|
       (I3 : ∃ A B C : Point, neq3 A B C ∧ ¬ ∃ l : Line,  A ~ l ∧ B ~ l ∧ C ~ l)
    \end{lstlisting}
\end{frame}

\input{presentacion-incidencia-demo-version-mas-corta.tex}
% \input{presentacion-incidencia-demo.tex}

\section{Geometría del orden}

\begin{frame}[fragile]
	\begin{defin*}
		Dados dos puntos distintos $A, B$ el \textbf{segmento}
		$\overline{AB}$ es el \textit{conjunto de puntos} que contiene a $A, B$ y a todos los
		puntos que están entre ellos.
	\end{defin*}
\end{frame}

\begin{frame}[fragile]
	\begin{defin*}
		Dos puntos distintos $A, B$ determinan el \textbf{segmento} $\overline{AB}$.
	\end{defin*}
	\begin{lstlisting}
     structure Seg := {A B : Point} (neq : A ≠ B)
    \end{lstlisting}

	\pause

	\begin{defin*}
		Un punto $C$ \textbf{pertenece} al segmento $\overline{AB}$
		si coincide con $A$ o $B$ o está entre ellos ($A * C * B$).
	\end{defin*}
	\begin{lstlisting}
     def Seg.in (seg : Seg) (P : Point) : Prop := 
       P = seg.A ∨ P = seg.B ∨ (og.between seg.A P seg.B)
    \end{lstlisting}
\end{frame}

% \begin{frame}[fragile]
% 	\setcounter{tma}{2}
% 	\begin{tma}
% 		Dados dos puntos distintos $A$ y $C$ existe un tercer punto $B$ que se
% 		encuentra entre ellos: $A * B * C$.
% 	\end{tma}
% 	\vspace{1em}
%     % \pause
% 	\centerline{\includegraphics[width=4cm]{./imgs/teorema3.png}}\\
% 	\vspace{1em}
% 	\textit{Formalizing Hilbert’s Grundlagen in Isabelle/Isar},\\
% 	Laura I. Meikle and Jacques D. Fleuriot.\\
% \end{frame}

\section{Independencia del axioma de las paralelas}
\begin{frame}[fragile]
	\begin{lstlisting}
     def parallel (Point : Type*) {Line : Type*} [ig : incidence_geometry Point Line] 
       (l m : Line) : Prop := ¬ ∃ P : Point, is_common_point P l m
     |\pause|
     def P (Point Line : Type*) [ig : incidence_geometry Point Line] := 
       ∀ (l : Line) (A : Point), ¬ A ~ l → ∃! m : Line, A ~ m ∧ parallel Point l m
    \end{lstlisting}
	\pause
	\begin{multicols}{2}
		\begin{lstlisting}
     theorem parallels_independence :
       ¬ ∀ plane : hilbert_plane Point Line, 
           P Point Line := 
     begin
       sorry
     end
        \end{lstlisting}
		\columnbreak
		\pause
		\begin{lstlisting}
Point Line : Type u
⊢ ¬ ∀ plane : hilbert_plane Point Line, 
      P Point Line
        \end{lstlisting}
	\end{multicols}
\end{frame}

\begin{frame}[fragile]
	\begin{lstlisting}
     def parallel (Point : Type*) {Line : Type*} [ig : incidence_geometry Point Line] 
       (l m : Line) : Prop := ¬ ∃ P : Point, is_common_point P l m

     def P (Point Line : Type*) [ig : incidence_geometry Point Line] := 
       ∀ (l : Line) (A : Point), ¬ A ~ l → ∃! m : Line, A ~ m ∧ parallel Point l m
    \end{lstlisting}

	\begin{multicols}{2}
		\begin{lstlisting}
     theorem parallels_independence :
       ¬ ∀ plane : hilbert_plane Point Line, 
           P Point Line := 
     begin
       push_neg, 
       sorry
     end
        \end{lstlisting}
		\columnbreak

		\begin{lstlisting}
Point Line : Type u
⊢ ∃ plane : hilbert_plane Point Line, 
      ¬ P Point Line
        \end{lstlisting}
	\end{multicols}
\end{frame}

\section{Conclusiones}

\begin{frame}[fragile, c]
	\begin{itemize}[<+->]
		\item Cumplimiento del proyecto de formalización de Hilbert.
		\item Lean como herramienta de estudio.
		\item Dificultades con \textit{mathlib}, en particular al intentar
		      definir modelos.
		\item Queda mucha geometría por formalizar en Lean.
	\end{itemize}
\end{frame}

\section{¡Gracias!}

\begin{frame}[c]
	\vspace{7px}
	\begin{figure}
		\includegraphics[height=180px]{./imgs/Scuola_di_Atene_Raffaello.png}
		\caption*{\scriptsize
			Detalle de \textit{La escuela de Atenas}, de Rafael Sanzio, \\
			donde vemos a Euclides enseñando a sus alumnos.
		}
	\end{figure}
\end{frame}

\end{document}


